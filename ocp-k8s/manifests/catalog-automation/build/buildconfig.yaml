---
apiVersion: build.openshift.io/v1
kind: BuildConfig
metadata:
  labels:
    app: index-builder
    build: index-builder
  name: index-builder
spec:
  failedBuildsHistoryLimit: 5
  nodeSelector: {}
  output:
    pushSecret:
      name: index-builder
    to:
      kind: DockerImage
      name: quayserver.com/tools/index-builder:latest
  postCommit: {}
  resources: {}
  runPolicy: Serial
  source:
    type: dockerfile
    dockerfile: |
      FROM registry.redhat.io/openshift4/ose-tools-rhel9:latest
      USER root
      RUN curl -k -sL -o /tmp/opm.tgz https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/latest-4.18/opm-linux-4.18.26.tar.gz && tar -xf /tmp/opm.tgz && mv /opm-rhel8 /usr/bin/opm
      USER 1001
      ENTRYPOINT ["/bin/bash"]
      CMD ["--help"]
  strategy:
    dockerStrategy:
    type: Docker
  successfulBuildsHistoryLimit: 5
  triggers:
    - type: ConfigChange
